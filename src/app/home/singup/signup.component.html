<h4 class="text-center">Registre-se agora e aproveite!</h4>

<form #form="ngForm" [formGroup]="signupForm" class="form mt-4" (submit)="signup()">
    <div class="form-group">
        <input #emailInput formControlName="email" class="form-control" placeholder="email" autofocus>
        <app-vmessage 
            *ngIf="signupForm.get('email').errors?.required && (form.submitted || signupForm.get('email').touched)"
            text="Email é obrigatório!">
        </app-vmessage>
        <app-vmessage 
            *ngIf="signupForm.get('email').errors?.email && (form.submitted || signupForm.get('email').touched)"
            text="Email inválido">
        </app-vmessage>            
    </div>

    <div class="form-group">
        <input formControlName="fullName" class="form-control" placeholder="nome completo">
        <app-vmessage 
            *ngIf="signupForm.get('fullName').errors?.required && (form.submitted || signupForm.get('fullName').touched)"
            text="Nome completo é obrigatório!">
        </app-vmessage>
        <app-vmessage 
            *ngIf="signupForm.get('fullName').errors?.minlength && (form.submitted || signupForm.get('fullName').touched)"
            text="Tamanho minimo: 2 caracteres">
        </app-vmessage>
        <app-vmessage 
            *ngIf="signupForm.get('fullName').errors?.maxlength && (form.submitted || signupForm.get('fullName').touched)"
            text="Tamanho máximo: 40 caracteres">
        </app-vmessage>              
    </div>

    <div class="form-group">
        <input formControlName="userName" class="form-control" placeholder="user name">
        <app-vmessage 
            *ngIf="signupForm.get('userName').errors?.required&& (form.submitted || signupForm.get('userName').touched)"
            text="Nome de usuario é obrigatório!">
        </app-vmessage>
        <app-vmessage 
            *ngIf="signupForm.get('userName').errors?.minlength && (form.submitted || signupForm.get('userName').touched)"
            text="Tamanho minimo: 2 caracteres">
        </app-vmessage>
        <app-vmessage 
            *ngIf="signupForm.get('userName').errors?.maxlength && (form.submitted || signupForm.get('userName').touched)"
            text="Tamanho máximo: 30 caracteres">
        </app-vmessage>
        <app-vmessage 
            *ngIf="signupForm.get('userName').errors?.lowerCase && (form.submitted || signupForm.get('userName').touched)"
            text="Somente letras minúsculas">
        </app-vmessage>

        <app-vmessage 
            text="Nome de usuário já existe" 
            *ngIf="signupForm.get('userName').errors?.userNameTaken">
        </app-vmessage> 
        <small *ngIf="signupForm.get('userName').valid" class="text-success">Nome de usuário disponível</small>
    </div>

    <div class="form-group">
        <input formControlName="password" type="password" class="form-control" placeholder="password">
        <app-vmessage 
            *ngIf="signupForm.get('password').errors?.required && (form.submitted || signupForm.get('password').touched)"
            text="Senha é obrigatória!">
        </app-vmessage>
        <app-vmessage 
            *ngIf="signupForm.get('password').errors?.minlength && (form.submitted || signupForm.get('password').touched)"
            text="Tamanho minimo: 8 caracteres">
        </app-vmessage>
        <app-vmessage 
            *ngIf="signupForm.get('password').errors?.maxlength && (form.submitted || signupForm.get('password').touched)"
            text="Tamanho máximo: 18 caracteres">
        </app-vmessage>

        <app-vmessage 
            *ngIf="signupForm.errors?.userNamePassword && form.submitted"
            text="Nome de usuário e Senha devem ser diferentes">
        </app-vmessage>

    </div>

    <button [disabled]="signupForm.invalid" class="btn btn-primary btn-block">Registrar-se</button>

    <p class="mt-3">Já possui uma conta? <a [routerLink]="['']">Faça login!</a></p>

</form>